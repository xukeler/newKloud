/*
* Kendo UI v2015.3.1002 (http://www.telerik.com/kendo-ui)
* Copyright 2015 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(e,define){define(["./kendo.scheduler.view.min"],e)}(function(){return function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return c(t,p(e)),t}function i(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}function o(e){var t,n=0;if(e.columns){for(t=0;e.columns.length>t;t++)n+=o(e.columns[t]);return e.colspan=n,n}return e.colspan=1,1}function r(e,t,n){var i,o,r,a;for(i=e.length-1;i>=0;i--)o=e[i].rectLeft,a=e[i].rectRight,r=t>=o&&a>=t,(r||o>=t&&n>=a||o>=t&&n>=o)&&(t>o&&(t=o),a>n&&(n=a));return s(e,t,n)}function s(e,t,n){var i,o,r=[];for(i=0;e.length>i;i++)o={rectLeft:e[i].rectLeft,rectRight:e[i].rectRight},(t>o.rectLeft&&o.rectRight>t||o.rectLeft>=t&&n>=o.rectRight)&&r.push(e[i]);return r}var a=window.kendo,l=a.ui,c=a.date.setTime,u=l.SchedulerView,d=e.extend,h=e.proxy,f=a.date.getDate,p=a.date.getMilliseconds,g=a.date.MS_PER_DAY,m=a.date.MS_PER_MINUTE,v=".kendoTimelineView",_=a.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),w=a.template("<span class='k-link k-nav-day'>#=kendo.format('{0:m}', date)#</span>"),y='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',b=u.extend({init:function(e,t){var n=this;u.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=i(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},name:"timeline",_currentTimeMarkerUpdater:function(){var t,n,i,o,r,s,l,c,u,d,h,f,p=new Date,g=this.options;if(this.datesHeader.find(".k-current-time").remove(),this._isInDateSlot({start:p,end:p}))for(g.currentTimeMarker.useLocalTimezone===!1&&(t=g.dataSource.options.schema.timezone,g.dataSource&&t&&(n=a.timezone.offset(p,t),p=a.timezone.convert(p,p.getTimezoneOffset(),n))),i=g.group&&"vertical"!=g.group.orientation?this.groups.length:1,o=0;i>o;o++){if(r=this.groups[o],s=a.date.toUtcTime(p),l=r.timeSlotRanges(s,s+1),0===l.length)return;c=l[0].collection,u=c.slotByStartDate(p),u&&(d=e("<div class='k-current-time'></div>"),h=this.datesHeader,f=Math.round(l[0].innerRect(p,new Date(p.getTime()+1),!1).left),d.appendTo(h.find(".k-scheduler-header-wrap")).css({left:this._adjustLeftPosition(f),width:"1px",bottom:"1px",top:0}))}},_adjustLeftPosition:function(e){return this._isRtl&&(e-=this.content[0].scrollWidth-this.content[0].offsetWidth),e},_currentTime:function(){var e,n=this,i=n.options.currentTimeMarker;i!==!1&&i.updateInterval!==t&&(e=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(h(this._currentTimeMarkerUpdater,n),e))},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+v,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+v,".k-scheduler-content td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+v,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this,n=0;a.support.mobileOS.android&&(n=5),t.options.editable.create!==!1&&(t._addUserEvents=new a.UserEvents(t.element,{threshold:n,filter:".k-scheduler-content td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new a.UserEvents(t.element,{threshold:n,filter:".k-event",tap:function(n){var i=e(n.target).closest(".k-event");i.hasClass("k-event-active")||t.trigger("edit",{uid:i.attr(a.attr("uid"))}),n.preventDefault()}}))},_slotByPosition:function(e,t){var n,i,o,r,s=this.content,l=s.offset();for(e-=l.left,t-=l.top,this._isRtl?(r=a.support.browser,r.mozilla?(e+=s[0].scrollWidth-s[0].offsetWidth,e+=s[0].scrollLeft):r.msie?(e-=s.scrollLeft(),e+=s[0].scrollWidth-s[0].offsetWidth):r.webkit&&(e+=s[0].scrollLeft)):e+=s[0].scrollLeft,t+=s[0].scrollTop,e=Math.ceil(e),t=Math.ceil(t),o=0;this.groups.length>o;o++)if(i=this.groups[o],n=i.timeSlotByPosition(e,t))return n;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",date:a.date.today(),startTime:a.date.today(),endTime:a.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,eventMinWidth:0,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:_,dateHeaderTemplate:w,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=d({},a.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,y),this.majorTimeHeaderTemplate=a.template(e.majorTimeHeaderTemplate,t),this.dateHeaderTemplate=a.template(e.dateHeaderTemplate,t),this.slotTemplate=a.template(e.slotTemplate,t),this.groupHeaderTemplate=a.template(e.groupHeaderTemplate,t)},_render:function(t){var n=this;t=t||[],n._dates=t,n._startDate=t[0],n._endDate=t[t.length-1||0],n._calculateSlotRanges(),n.createLayout(n._layout(t)),n._content(t),n._footer(),n._setContentWidth(),n.refreshLayout(),n.datesHeader.on("click"+v,".k-nav-day",function(t){var i=e(t.currentTarget).closest("th"),o=n._slotByPosition(i.offset().left,n.content.offset().top);n.trigger("navigate",{view:"timeline",date:o.startDate()})}),n.timesHeader.find("table tr:last").hide(),n.datesHeader.find("table tr:last").hide()},_setContentWidth:function(){var e=this.content,t=e.width(),n=this.content.find("table"),i=n.find("tr:first").children().length,o=100,r=i*this.options.columnWidth;r>t&&(o=Math.ceil(r/t*100)),n.add(this.datesHeader.find("table")).css("width",o+"%")},_calculateSlotRanges:function(){var e,t,n,i,o=this._dates,r=this.startTime(),s=this.endTime();for(p(s)===p(a.date.getDate(s))&&(s=a.date.getDate(s),c(s,g-1)),s=p(s),r=p(r),e=[],t=0;o.length>t;t++)n=f(o[t]),c(n,r),i=f(o[t]),c(i,s),e.push({start:a.date.toUtcTime(n),end:a.date.toUtcTime(i)});this._slotRanges=e},_forTimeRange:function(e,t,i,o){var r,s,a,l,u,d,h,f,v,_,w,y,b,x,k,C,S,T;for(e=n(e),t=n(t),r=this,s=p(e),a=p(t),l=r.options.minorTickCount,u=r.options.majorTick*m,d=u/l||1,h=new Date(+e),f=h.getDate(),_=0,y="",w=g/d,s!=a&&(s>a&&(a+=g),w=(a-s)/d),w=Math.round(w);w>_;_++)b=_%(u/d),x=0===b,k=l-1>b,C=b===l-1,S=l,w%l!==0&&(T=l>w-(_+1),x&&T&&(S=w%l)),y+=i(h,x,k,C,S),c(h,d,!1);return a&&(v=p(h),f<h.getDate()&&(v+=g),v>a&&(h=new Date(+t))),o&&(y+=o(h)),y},_layout:function(e){var t,n,i,r=[],s=[],a=this,l=[{text:a.options.messages.defaultRowText}],c=[];for(t=0;a.options.minorTickCount>t;t++)c.push({text:"",className:""});for(this._forTimeRange(a.startTime(),a.endTime(),function(e,t,n,i,s){var l,u=a.majorTimeHeaderTemplate;t&&(l={text:u({date:e}),className:i?"k-slot-cell":"",columns:c.slice(0,s)},o(l),r.push(l))}),n=0;e.length>n;n++)s.push({text:a.dateHeaderTemplate({date:e[n]}),className:"k-slot-cell",columns:r.slice(0)});return i=this.groupedResources,i.length&&("vertical"===this._groupOrientation()?l=a._createRowsLayout(i,null,this.groupHeaderTemplate):s=a._createColumnsLayout(i,s,this.groupHeaderTemplate)),{columns:s,rows:l}},_footer:function(){var t,n,i,o=this.options;o.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',n=o.footer.command,n&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(o.showWorkHours?o.messages.showFullDay:o.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+v,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||o.name,date:i.startDate(),isWorkDay:!o.showWorkHours})}))},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_content:function(e){var t,n,i,o,r,s=this,l=s.options,c=s.startTime(),u=this.endTime(),d=1,h=1,f=e.length,p="",g=this.groupedResources,m=this.slotTemplate,v=!1;for(g.length&&(v="vertical"===s._groupOrientation(),v?h=s._groupCount():d=s._groupCount()),p+="<tbody>",t=function(t){var r,c="",u="",d=function(e){return function(){return s._resourceBySlot({groupIndex:e})}};return a.date.isToday(e[o])&&(u+="k-today"),(a.date.getMilliseconds(t)<a.date.getMilliseconds(l.workDayStart)||a.date.getMilliseconds(t)>=a.date.getMilliseconds(l.workDayEnd)||!s._isWorkDay(e[o]))&&(u+=" k-nonwork-hour"),c+="<td"+(""!==u?' class="'+u+'"':"")+">",r=a.date.getDate(e[o]),a.date.setTime(r,a.date.getMilliseconds(t)),c+=m({date:r,resources:d(v?n:i)}),c+="</td>"},n=0;h>n;n++){for(p+="<tr>",i=0;d>i;i++)for(o=0,r=f;r>o;o++)p+=this._forTimeRange(c,u,t);p+="</tr>"}p+="</tbody>",this.content.find("table").append(p)},_groups:function(){var e,t,n,i,o=this._groupCount(),r=this._dates,s=r.length;for(this.groups=[],e=0;o>e;e++)t=this._addResourceView(e),n=r[0],i=r[r.length-1||0],t.addTimeSlotCollection(n,a.date.addDays(i,1));this._timeSlotGroups(o,s)},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(e,t){var n,i,o,r,s,a,l,c,u,d,h,f,g,m,v,_,w,y,b=this._timeSlotInterval(),x=this._isVerticallyGrouped(),k=this.content.find("tr"),C=k.length;for(k.attr("role","row"),x&&(C=Math.floor(C/e)),n=0;e>n;n++)for(i=0,o=this.groups[n],x&&(i=n),s=i*C,a=0,x||(a=n),l=k[s].children,c=l.length/(x?1:e),u=c/t,d=0;t>d;d++)for(h=d*u+c*a,r=p(new Date(+this.startTime())),f=0;u>f;f++)g=l[f+h],m=o.getTimeSlotCollection(0),v=this._dates[d],_=Date.UTC(v.getFullYear(),v.getMonth(),v.getDate()),w=_+r,y=w+b,g.setAttribute("role","gridcell"),g.setAttribute("aria-selected",!1),m.addTimeSlot(g,w,y,!0),r+=b},startDate:function(){return this._startDate},endDate:function(){return this._endDate},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*m},nextDate:function(){return a.date.nextDay(this.endDate())},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(e){var t,n,i,o,r;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),e=new a.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),t=[],this._eventsByResource(e,this.groupedResources,t),n=[],i=0,o=0;t.length>o;o++)r={groupIndex:o,maxRowCount:0,events:{}},n.push(r),this._renderEvents(t[o],o,r),r.maxRowCount>i&&(i=r.maxRowCount);this._setRowsHeight(n,t.length,i),this._positionEvents(n,t.length),this.trigger("activate")},_positionEvents:function(e,t){var n,i,o,r;for(n=0;t>n;n++){i=e[n].events;for(o in i)r=i[o],this._positionEvent(r)}},_setRowsHeight:function(t,n,i){var o,r,s,a,l,c=this.options.eventHeight+2,u=this._getBottomRowOffset();for(n=this._isVerticallyGrouped()?n:1,o=0;n>o;o++)r=this._isVerticallyGrouped()?t[o].maxRowCount:i,r=r?r:1,s=(c+2)*r+u,a=e(this.times.find("tr")[o]),l=e(this.content.find("tr")[o]),a.height(s),l.height(s);this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var e,t,n=.5*this.options.eventHeight,i=this._isMobile();return i?(e=30,t=60):(e=15,t=30),n>t?n=t:e>n&&(n=e),n},_positionEvent:function(e){var t,n,i,o=this.options.eventHeight+2,r=e.slotRange.innerRect(e.start,e.end,!1),s=this._adjustLeftPosition(r.left),a=r.right-r.left-2;0>a&&(a=0),this.options.eventMinWidth>a&&(t=e.slotRange.collection,n=t._slots[t._slots.length-1],i=n.offsetLeft+n.offsetWidth,a=this.options.eventMinWidth,s+a>i&&(a=i-r.left-2)),e.element.css({top:e.slotRange.start.offsetTop+e.rowIndex*(o+2)+"px",left:s,width:a})},_refreshSlots:function(){for(var e=0;this.groups.length>e;e++)this.groups[e].refresh()},_eventsByResource:function(e,t,n){var i,o,r,s,l=t[0];if(l)for(i=l.dataSource.view(),o=0;i.length>o;o++)r=this._resourceValue(l,i[o]),s=new a.data.Query(e).filter({field:l.field,operator:u.groupEqFilter(r)}).toArray(),t.length>1?this._eventsByResource(s,t.slice(1),n):n.push(s);else n.push(e)},_isInDateSlot:function(e){var t=e.start,n=e.end,i=f(this._startDate),o=a.date.addDays(f(this._endDate),1);return o>t&&n>=i?!0:!1},_isInTimeSlot:function(e){var t,n=e._startTime||a.date.toUtcTime(e.start),i=e._endTime||a.date.toUtcTime(e.end),o=this._slotRanges;for(n===i&&(i+=1),t=0;o.length>t;t++)if(o[t].end>n&&i>o[t].start)return!0;return!1},_adjustEvent:function(e){var t,n=e.start,i=e.end,o=e._time("start"),r=e._time("end"),s=p(this.startTime()),l=p(this.endTime()),u=null,d=null,h=!1,m=!1;return e.isAllDay?(u=f(n),s>o&&(c(u,s),m=!0),d=f(i),l===p(f(this.endTime()))?d=a.date.addDays(d,1):(c(d,l),h=!0)):(l=0===l?g:l,s>o?(u=f(n),c(u,s),m=!0):o>l&&(u=f(n),u=a.date.addDays(u,1),c(u,s),m=!0),r>l?(d=f(i),c(d,l),h=!0):s>r&&(d=f(i),d=a.date.addDays(d,-1),c(d,l),h=!0)),t=e.clone({start:u?u:n,end:d?d:i,_startTime:u?a.date.toUtcTime(u):e._startTime,_endTime:d?a.date.toUtcTime(d):e._endTime,isAllDay:!1}),{occurrence:t,head:h,tail:m}},_renderEvents:function(e,t,n){var i,o,r,s,a,l,c,u,d,h,f;for(o=0,r=e.length;r>o;o++)i=e[o],this._isInDateSlot(i)&&(s=i.isAllDay||i.end.getTime()-i.start.getTime()>=g,a=this.content,(s||this._isInTimeSlot(i))&&(l=this._adjustEvent(i),c=this.groups[t],c._continuousEvents||(c._continuousEvents=[]),u=c.slotRanges(l.occurrence,!1),d=u[0],this._isInTimeSlot(l.occurrence)&&(h=this._createEventElement(l.occurrence,i,d.head||l.head,d.tail||l.tail),h.appendTo(a).css({top:0,height:this.options.eventHeight}),f={start:l.occurrence._startTime||l.occurrence.start,end:l.occurrence._endTime||l.occurrence.end,element:h,uid:i.uid,slotRange:d,rowIndex:0,offsetTop:0},n.events[i.uid]=f,this.addContinuousEvent(c,d,h,i.isAllDay),this._arrangeRows(f,d,n))))},addContinuousEvent:function(e,t,n,i){var o=e._continuousEvents;o.push({element:n,isAllDay:i,uid:n.attr(a.attr("uid")),start:t.start,end:t.end})},_createEventElement:function(t,n,i,o){var r,s,l=this.eventTemplate,c=this.options.editable,u=this._isMobile(),h=c&&c.destroy!==!1&&!u,f=c&&c.resize!==!1,p=n._time("start"),g=n._time("end"),m=n.start,v=n.end,_=this.eventResources(n);return n._startTime&&p!==a.date.getMilliseconds(n.start)&&(m=new Date(p),m=a.timezone.apply(m,"Etc/UTC")),n._endTime&&g!==a.date.getMilliseconds(n.end)&&(v=new Date(g),v=a.timezone.apply(v,"Etc/UTC")),r=d({},{ns:a.ns,resizable:f,showDelete:h,head:i,tail:o,singleDay:1==this._dates.length,resources:_,inverseColor:_&&_[0]?this._shouldInverseResourceColor(_[0]):!1},n,{start:m,end:v}),s=e(l(r)),this.angular("compile",function(){return{elements:s,data:[{dataItem:r}]}}),s},_arrangeRows:function(e,t,n){var i,o,s,a,l,c,d=t.start.index,h=t.end.index,f=e.slotRange.innerRect(e.start,e.end,!1),p=f.right+this.options.eventMinWidth,g=r(t.events(),f.left,p);for(t.addEvent({slotIndex:d,start:d,end:h,rectLeft:f.left,rectRight:p,element:e.element,uid:e.uid}),g.push({start:d,end:h,uid:e.uid}),i=u.createRows(g),i.length>n.maxRowCount&&(n.maxRowCount=i.length),o=0,s=i.length;s>o;o++)for(a=i[o].events,l=0,c=a.length;c>l;l++)n.events[a[l].uid].rowIndex=o},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length-1):1},_updateEventForSelection:function(e){var t=this._adjustEvent(e.clone());return t.occurrence},_eventOptionsForMove:function(e){return e.isAllDay?{isAllDay:!1}:{}},_updateEventForResize:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateMoveHint:function(e,t,n){var i,o,r,s,a,l,c,u,d,h,f,p=this.groups[t],g=e.clone({start:e.start,end:e.end}),m=g.duration();for(g.start=new Date(g.start.getTime()+n),g.end=new Date(+g.start+m),i=this._adjustEvent(g),o=p.slotRanges(i.occurrence,!1),this._removeMoveHint(),r=0;o.length>r;r++)s=o[r],a=s.start,l=this._createEventElement(i.occurrence,i.occurrence,!1,!1),l.addClass("k-event-drag-hint"),c=s.innerRect(i.occurrence.start,i.occurrence.end,this.options.snap),u=c.right-c.left-2,0>u&&(u=0),d=this._adjustLeftPosition(c.left),h={left:d,top:a.offsetTop,height:a.offsetHeight-2,width:u},l.css(h),this._moveHint=this._moveHint.add(l);f=this.content,this._moveHint.appendTo(f)},_updateResizeHint:function(e,t,n,i){var o,r,s,l,c,d,h,f,p,g,m=this.groups[t],v=m.ranges(n,i,!1,!1);for(this._removeResizeHint(),o=0;v.length>o;o++)r=v[o],s=r.startSlot(),l=r.innerRect(n,i,!1),l.top=s.offsetTop,c=l.right-l.left,d=s.offsetHeight,h=this._adjustLeftPosition(l.left),f=u.fn._createResizeHint.call(this,h,l.top,c,d),this._resizeHint=this._resizeHint.add(f);p="t",g=this.content,this._resizeHint.appendTo(g),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(a.toString(a.timezone.toLocalDate(n),p)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(a.toString(a.timezone.toLocalDate(i),p))},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_updateDirection:function(e,t,n,i,o){var r=t[0].start,s=t[t.length-1].end;n&&!o&&r.index===s.index&&r.collectionIndex===s.collectionIndex&&(e.backward=i)},_changeGroup:function(e,t){var n=t?"prevGroupSlot":"nextGroupSlot",i=this[n](e.start,e.groupIndex,!1);return i&&(e.groupIndex+=t?-1:1),i},prevGroupSlot:function(e,t,n){var i,o=this.groups[t],r=o.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?r:(i=o._collection(0,n),i.last())},nextGroupSlot:function(e,t,n){var i,o=this.groups[t],r=o.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?r:(i=o._collection(0,n),i.first())},_verticalSlots:function(e,t,n,i){var o=i?"leftSlot":"rightSlot",r=t[0].start,s=t[t.length-1].end,a=this.groups[e.groupIndex];return r=a[o](r),s=a[o](s),n||!this._isVerticallyGrouped()||r&&s||(r=s=this._changeGroup(e,i)),{startSlot:r,endSlot:s}},_horizontalSlots:function(e,t,n,i){var o=i?"upSlot":"downSlot",r=t[0].start,s=t[t.length-1].end,a=this.groups[e.groupIndex];return r=a[o](r),s=a[o](s),n||!this._isHorizontallyGrouped()||r&&s||(r=s=this._changeGroup(e,i)),{startSlot:r,endSlot:s}},_changeViewPeriod:function(e,t){var n,i=t?this.previousDate():this.nextDate(),o=e.start,r=e.end;return e.start=new Date(i),e.end=new Date(i),this._isHorizontallyGrouped()&&(e.groupIndex=t?this.groups.length-1:0),n=r-o,t?(r=p(this.endTime()),r=0===r?g:r,c(e.start,r-n),c(e.end,r)):(o=p(this.startTime()),c(e.start,o),c(e.end,o+n)),e.events=[],!0},move:function(e,t,n){var i,o,r,s,l,c=!1,u=this.groups[e.groupIndex],d=a.keys,h=u.ranges(e.start,e.end,!1,!1);if(t===d.DOWN||t===d.UP)c=!0,r=t===d.UP,this._updateDirection(e,h,n,r,!0),s=this._verticalSlots(e,h,n,r);else if((t===d.LEFT||t===d.RIGHT)&&(c=!0,r=t===d.LEFT,this._updateDirection(e,h,n,r,!1),s=this._horizontalSlots(e,h,n,r),(!s.startSlot||!s.endSlot)&&!n&&this._changeViewPeriod(e,r,!1)))return c;return c&&(i=s.startSlot,o=s.endSlot,n?(l=e.backward,l&&i?e.start=i.startDate():!l&&o&&(e.end=o.endDate())):i&&o&&(e.start=i.startDate(),e.end=o.endDate()),e.events=[]),c},destroy:function(){var e=this;e.element&&e.element.off(v),e.footer&&e.footer.remove(),e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),u.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(e.options.editable.create!==!1&&e._addUserEvents.destroy(),e.options.editable.update!==!1&&e._editUserEvents.destroy())}});d(!0,l,{TimelineView:b,TimelineWeekView:b.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var e,t,n=this.options.date,i=a.date.dayOfWeek(n,this.calendarInfo().firstDay,-1),o=[];for(e=0,t=7;t>e;e++)o.push(i),i=a.date.nextDay(i);this._render(o)}}),TimelineWorkWeekView:b.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){return a.date.dayOfWeek(a.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=a.date.dayOfWeek(e,this.options.workWeekStart,-1),n=a.date.dayOfWeek(t,this.options.workWeekEnd,1),i=[];n>=t;)i.push(t),t=a.date.nextDay(t);this._render(i)}}),TimelineMonthView:b.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,23,59,59),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineMonth",calculateDateRange:function(){var e,t,n=this.options.date,i=a.date.firstDayOfMonth(n),o=a.date.lastDayOfMonth(n),r=[];for(e=0,t=o.getDate();t>e;e++)r.push(i),i=a.date.nextDay(i);this._render(r)}})})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});